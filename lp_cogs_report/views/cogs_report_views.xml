<odoo>

    <record id="cogs_report_form" model="ir.ui.view">
        <field name="name">cogs.report.form</field>
        <field name="model">cogs.report</field>
            <field name="arch" type="xml">
                <form string="COGS Report">
                    <header>
                        <button name="button_compute_reports" string="Compute Reports"
                                class="oe_highlight" type="object"
                                attrs="{'invisible': [('state', '!=', 'draft')]}"/>
                        <button name="button_draft" string="Reset to Draft"
                                type="object"
                                attrs="{'invisible': [('state', '=', 'draft')]}"/>
                        <field name="state" widget="statusbar"/>
                        <!-- <field name="state" widget="statusbar" statusbar_visible="draft,calculated"/> -->
                    </header>
                    <sheet>
                        <!-- <div name="button_box" class="oe_button_box">
                            <button type="object" name="action_view_related_move_lines" 
                                class="oe_stat_button" icon="fa-usd">
                                <field string="Valuation" name="account_move_count" widget="statinfo"/>
                            </button>
                        </div> -->

                        <group>
                            <group>
                                <field name="year" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                                <field name="month" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                                <label for="date_from" class="text-muted"/>
                                <field name="date_from" readonly="1" nolabel="1" class="text-muted"/>
                                <label for="date_to" class="text-muted"/>
                                <field name="date_to" readonly="1" nolabel="1" class="text-muted"/>
                            </group>
                        </group>
                        <div class="oe_title">
                            <h1><field name="name" placeholder="Name" nolabel="1" attrs="{'readonly': [('state', '=', 'posted')]}"/></h1>
                        </div>
                        <group>
                            <group>
                                <field name="material_loss_id" attrs="{'readonly': [('state', '!=', 'draft')]}" options="{'no_create_edit': True}" context="{'date_from': date_from, 'date_to': date_to}"/>
                                <field name="labor_cost_id" attrs="{'readonly': [('state', '!=', 'draft')]}" options="{'no_create_edit': True}" context="{'date_from': date_from, 'date_to': date_to}"/>
                                <field name="click_charge_id" attrs="{'readonly': [('state', '!=', 'draft')]}" options="{'no_create_edit': True}" context="{'date_from': date_from, 'date_to': date_to}"/>
                                <field name="overhead_cost_id" attrs="{'readonly': [('state', '!=', 'draft')]}" options="{'no_create_edit': True}" context="{'date_from': date_from, 'date_to': date_to}"/>
                            </group>
                            <group>
                                <!-- <field name="journal_id" attrs="{'readonly': [('state', '!=', 'draft')]}" options="{'no_create_edit': True}"/> -->
                                <field name="company_id" groups="base.group_multi_company"/>
                                <field name="currency_id" attrs="{'readonly': [('state', '!=', 'draft')]}" groups="base.group_multi_currency" options="{'no_create_edit': True}"/>
                            </group>
                            <group>
                                <field name="cogs_pack_xlsx_filename" invisible="1"/>
                                <field name="cogs_pack_xlsx"
                                    filename="cogs_pack_xlsx_filename"
                                    class="ml-4"
                                    attrs="{'invisible': [('cogs_pack_xlsx', '=', False)]}"/>
                            </group>
                        </group>
                        <notebook>
                            <page string="COGS Summary Report">
                                <!-- <button name="export_allocation_lines" string="Generate XLSX Export"
                                        class="oe_highlight" type="object"
                                        attrs="{'invisible': ['|', ('allocation_line_ids', '=', []), ('allocation_lines_xlsx', '!=', False)]}"/>
                                <button name="export_allocation_lines" string="Re-Generate XLSX Export"
                                        class="oe_highlight" type="object"
                                        attrs="{'invisible': ['|', ('allocation_line_ids', '=', []), ('allocation_lines_xlsx', '=', False)]}"/> -->
                                <field name="cogs_summary_xlsx_filename" invisible="1"/>
                                <field name="cogs_summary_xlsx"
                                    filename="cogs_summary_xlsx_filename"
                                    class="ml-4"
                                    attrs="{'invisible': [('cogs_summary_xlsx', '=', False)]}"/>
                                <field name="summary_line_ids" readonly="1">
                                    <tree edit="0" create="0" delete="0">
                                        <field name="currency_id" invisible="1"/>
                                        <field name="" readonly="1"/>
                                        <field name="" widget="monetary" readonly="1"/>
                                        <!-- <field name="material_id" readonly="1"/>
                                        <field name="lp_product_id" readonly="1"/>
                                        <field name="wip_pack" readonly="1"/>
                                        <field name="mo_id" readonly="1"/>
                                        <field name="parent_mo_id" readonly="1"/>
                                        <field name="pa_product_id" readonly="1"/>
                                        <field name="lp_qty" readonly="1"/>
                                        <field name="pa_qty" readonly="1"/>
                                        <field name="product_on_hand_qty" readonly="1"/>
                                        <field name="product_on_hand_value" readonly="1"/>
                                        <field name="ceq_factor" readonly="1"/>
                                        <field name="ceq_converted_qty" readonly="1"/>
                                        <field name="allocation_ratio" readonly="1"/>
                                        <field name="material_loss_allocation" readonly="1"/>
                                        <field name="shipped_qty_lp" readonly="1"/>
                                        <field name="shipped_qty_pa" readonly="1"/>
                                        <field name="cogs_allocated_lp" widget="monetary" readonly="1"/>
                                        <field name="cogs_allocated_pa" widget="monetary" readonly="1"/>
                                        <field name="unit_cost_to_adjust_by_lp" widget="monetary" readonly="1"/>
                                        <field name="unit_cost_to_adjust_by_pa" widget="monetary" readonly="1"/>
                                        <field name="rounding_difference" readonly="1"/> -->
                                    </tree>
                                </field>
                                <p attrs="{'invisible': [('allocation_line_ids', '!=', [])]}">
                                    Use the Compute Reports button to create lines here.
                                </p>
                                <!-- <group attrs="{'invisible': [('allocation_line_ids', '==', [])]}">
                                    <field name="allocation_rounding_difference"/>
                                </group> -->
                            </page>
                        </notebook>
                    </sheet>
                </form>
            </field>
    </record>

    <record id="view_cogs_report_tree" model="ir.ui.view">
        <field name="name">cogs.report.tree</field>
        <field name="model">cogs.report</field>
        <field name="arch" type="xml">
            <tree string="COGS Report">
                <field name="name"/>
                <field name="create_date" string="Date"/>
                <field name="state"/>
                <field name="company_id" groups="base.group_multi_company"/>
            </tree>
        </field>
    </record>

    <menuitem
        id="cogs_reports_menu"
        name="COGS"
        parent="account.menu_finance_reports"
        sequence="4"/>

    <record id="action_view_list_cogs_report" model="ir.actions.act_window">
        <field name="name">COGS Report</field>
        <field name="type">ir.actions.act_window</field>
        <field name="res_model">cogs.report</field>
        <field name="view_mode">tree,form</field>
        <field name="view_id" ref="view_cogs_report_tree"/>
    </record>

    <menuitem
        id="cogs_report_menu"
        name="COGS Report"
        action="wizard_cogs_pack_report_action"
        parent="cogs_reports_menu"
        sequence="1"/>

</odoo>
